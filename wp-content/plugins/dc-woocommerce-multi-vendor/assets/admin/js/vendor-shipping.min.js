!function(e,i,t,n){e(function(){var t=t||{build:function(){this.init(),this.bindEvents()},init:function(){this.table_shipping_zone_settings=".wcmp-shipping-zone-settings",this.table_shipping_zone_methods=".wcmp-shipping-zone-methods",this.modify_shipping_methods=".modify-shipping-methods",this.modal_add_shipping_method=".wcmp-modal-add-shipping-method-modal",this.show_shipping_methods=this.table_shipping_zone_settings+" .wcmp-shipping-zone-show-method",this.add_shipping_methods=this.modal_add_shipping_method+" .wcmp-shipping-zone-add-method",this.edit_shipping_methods=this.table_shipping_zone_settings+" .edit-shipping-method",this.delete_shipping_method=this.table_shipping_zone_settings+" .delete-shipping-method",this.method_status=this.table_shipping_zone_methods+" .method-status",this.limit_zone_location=this.table_shipping_zone_settings+" #limit_zone_location"},bindEvents:function(){e(document.body).on("click",this.show_shipping_methods,this.showShippingMethods),e(document.body).on("wc_backbone_modal_response",this.addShippingMethod),e(document.body).on("wc_backbone_modal_response",this.updateShippingMethod),e(document.body).on("click",this.edit_shipping_methods,this.editShippingMethod),e(document.body).on("click",this.delete_shipping_method,this.deleteShippingMethod),e(document.body).on("change",this.method_status,this.toggleShippingMethod),e(document.body).on("change",this.limit_zone_location,this.limitZoneLocation),e(document.body).on("change",".wc-shipping-zone-method-selector select",this.onChangeShippingMethodSelector),this.limitZoneLocation()},showShippingMethods:function(i){i.preventDefault();var t=e("#zone_id").val();e(this).WCBackboneModal({template:"wcmp-modal-add-shipping-method",variable:{zone_id:t}}),e(".wc-shipping-zone-method-selector select").change()},onChangeShippingMethodSelector:function(){var i=e(this).find("option:selected").data("description");e(this).parent().find(".wc-shipping-zone-method-description").remove(),e(this).after('<div class="wc-shipping-zone-method-description">'+i+"</div>"),e(this).closest("article").height(e(this).parent().height())},addShippingMethod:function(i,t,o){if("wcmp-modal-add-shipping-method"===t){i.preventDefault();var s=o.zone_id,d=o.wcmp_shipping_method;if(""==s);else if(""==d);else{var h={action:"wcmp-add-shipping-method",zoneID:s,method:d};e(this.add_shipping_methods).block({message:null,overlayCSS:{background:"#fff",opacity:.6}});e.ajax({method:"post",url:n,data:h,success:function(e){e.success&&location.reload()}})}}},editShippingMethod:function(i){i.preventDefault(),e(".wcmp-shipping-zone-methods").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var t=e(i.currentTarget).data("instance_id"),o=e(i.currentTarget).data("method_id"),s={action:"wcmp-configure-shipping-method",zoneId:e(i.currentTarget).data("zone_id"),instanceId:t,methodId:o};e("#method_id_selected").val(o),e("#instance_id_selected").val(t);e.ajax({method:"post",url:n,data:s,success:function(i){i&&(e(".wcmp-shipping-zone-methods").unblock(),e(this).WCBackboneModal({template:"wcmp-modal-update-shipping-method",variable:{methodId:o,instanceId:t,config_settings:i}}))}})},updateShippingMethod:function(i,t,o){if("wcmp-modal-update-shipping-method"===t){i.preventDefault();var s=o.method_id,d=o.instance_id,h=o.zone_id,a={action:"wcmp-update-shipping-method",zoneID:h,posted_data:o,args:{instance_id:d,zone_id:h,method_id:s,settings:{}}};e.ajax({method:"post",url:n,data:a,success:function(e){e.success?location.reload():alert(e.data)}})}},deleteShippingMethod:function(t){t.preventDefault();if(confirm(i.i18n.deleteShippingMethodConfirmation)){e(t.target).is(this.delete_shipping_method)?t.target:e(t.target).closest(this.delete_shipping_method);var o=e(t.target).attr("data-instance_id"),s=e("#zone_id").val(),d=d={action:"wcmp-delete-shipping-method",zoneID:s,instance_id:o};if(""==s);else if(""==o);else e.ajax({method:"post",url:n,data:d,success:function(e){e.success?location.reload():alert(resp.data)}})}},limitZoneLocation:function(i){e("#limit_zone_location").is(":checked")?e(".hide_if_zone_not_limited").show():e(".hide_if_zone_not_limited").hide()},toggleShippingMethod:function(i){i.preventDefault();var t=e(i.target).is(":checked"),n=e(i.target).val(),o=e("#zone_id").val(),s={action:"wcmp-toggle-shipping-method",zoneID:o,instance_id:n,checked:t};if(""==o);else if(""==n);else{e(".wcmp-container").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});e.ajax({method:"post",url:wcmp_vendor_shipping_script_data.ajaxurl,data:s,success:function(i){i.success?e(".wcmp-container").unblock():(e(".wcmp-container").unblock(),alert(i.data))}})}}};e(t.build.bind(t))})}(jQuery,wcmp_vendor_shipping_script_data,wp,ajaxurl);